<Window
    x:Class="HUDRA.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:HUDRA.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:HUDRA"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Border
        x:Name="MainBorder"
        Background="Transparent"
        CornerRadius="20">
        <Grid x:Name="LayoutRoot" Background="Transparent">
            <Grid.ColumnDefinitions>
                <!--  Navigation bar column  -->
                <ColumnDefinition Width="60" />
                <!--  Content column  -->
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  Vertical Navigation Bar  -->
            <Border
                Grid.Column="0"
                Margin="0"
                Background="#1A1A1A"
                CornerRadius="20,0,0,20">
                <Grid>
                    <Grid.RowDefinitions>
                        <!--  Top section for battery and main nav items  -->
                        <RowDefinition Height="*" />
                        <!--  Bottom section for settings and close buttons  -->
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!--  Navigation Items  -->
                    <StackPanel
                        Grid.Row="0"
                        Margin="0,10,0,0"
                        HorizontalAlignment="Center"
                        Orientation="Vertical"
                        Spacing="0">

                        <!--  HUDRA Logo - Now the dedicated drag handle  -->
                        <Border
                            x:Name="LogoDragHandle"
                            Width="50"
                            Height="50"
                            Margin="0"
                            HorizontalAlignment="Center"
                            Background="Transparent"
                            CornerRadius="8"
                            ToolTipService.ToolTip="Drag me!">
                            <Image
                                Width="35"
                                Height="35"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Source="/Assets/HUDRA-logo-violet.png"
                                Stretch="Uniform" />

                            <!--  Add a subtle visual hint that this is draggable  -->
                            <Border.Resources>
                                <Storyboard x:Key="HoverStoryboard">
                                    <DoubleAnimation
                                        Storyboard.TargetName="LogoDragHandle"
                                        Storyboard.TargetProperty="Opacity"
                                        To="0.4"
                                        Duration="0:0:0.1" />
                                </Storyboard>
                                <Storyboard x:Key="NormalStoryboard">
                                    <DoubleAnimation
                                        Storyboard.TargetName="LogoDragHandle"
                                        Storyboard.TargetProperty="Opacity"
                                        To="1.0"
                                        Duration="0:0:0.1" />
                                </Storyboard>
                            </Border.Resources>
                        </Border>

                        <!--  Battery status - moved to nav bar  -->
                        <StackPanel
                            x:Name="BatteryPanel"
                            Width="50"
                            Height="60"
                            Margin="0,0,0,10"
                            HorizontalAlignment="Center"
                            Background="Transparent"
                            Orientation="Vertical"
                            ToolTipService.ToolTip="{x:Bind BatteryToolTip, Mode=OneWay}">
                            <FontIcon
                                x:Name="BatteryIcon"
                                Margin="0"
                                HorizontalAlignment="Center"
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="35"
                                Foreground="DarkGray"
                                Glyph="&#xE850;" />
                            <TextBlock
                                x:Name="BatteryText"
                                HorizontalAlignment="Center"
                                FontFamily="Cascadia Code"
                                FontSize="12"
                                FontWeight="SemiBold"
                                Foreground="{x:Bind BatteryTextBrush, Mode=OneWay}"
                                Text="{x:Bind BatteryPercentageText, Mode=OneWay}" />
                        </StackPanel>

                        <!--  LB/RB Glyphs - Navigate page buttons  -->
                        <StackPanel
                            Margin="0,5,0,5"
                            HorizontalAlignment="Center"
                            Orientation="Horizontal"
                            Spacing="03">
                            <Image
                                Width="20"
                                Height="20"
                                Opacity="0.7"
                                Source="/Assets/Glyphs/xbox_lb_outline.png"
                                Stretch="Uniform" />
                            <Image
                                Width="20"
                                Height="20"
                                Opacity="0.7"
                                Source="/Assets/Glyphs/xbox_rb_outline.png"
                                Stretch="Uniform" />
                        </StackPanel>

                        <!--  Main Page Navigation Item (Home icon)  -->
                        <Button
                            x:Name="MainPageNavButton"
                            Width="60"
                            Height="60"
                            HorizontalAlignment="Center"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Click="MainPageNavButton_Click"
                            Style="{StaticResource NavigationButtonStyle}"
                            TabIndex="1"
                            ToolTipService.ToolTip="Performance Controls">
                            <FontIcon
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="25"
                                Glyph="&#xE80F;" />
                        </Button>

                        <!--  Library Navigation Item  -->
                        <Button
                            x:Name="LibraryNavButton"
                            Width="60"
                            Height="60"
                            HorizontalAlignment="Center"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Click="LibraryNavButton_Click"
                            Style="{StaticResource NavigationButtonStyle}"
                            TabIndex="2"
                            ToolTipService.ToolTip="Game Library">
                            <FontIcon
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="25"
                                Glyph="&#xE8F1;" />
                        </Button>

                        <!--  Fan Curve Navigation Item  -->
                        <Button
                            x:Name="FanCurveNavButton"
                            Width="60"
                            Height="60"
                            HorizontalAlignment="Center"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Click="FanCurveNavButton_Click"
                            Style="{StaticResource NavigationButtonStyle}"
                            TabIndex="3"
                            ToolTipService.ToolTip="Fan Curve Configuration">
                            <FontIcon
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="25"
                                Glyph="&#xEC49;" />
                        </Button>

                        <!--  Scaling Navigation Item  -->
                        <Button
                            x:Name="ScalingNavButton"
                            Width="60"
                            Height="60"
                            HorizontalAlignment="Center"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Click="ScalingNavButton_Click"
                            Style="{StaticResource NavigationButtonStyle}"
                            TabIndex="4"
                            ToolTipService.ToolTip="Scaling">
                            <FontIcon
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="25"
                                Glyph="&#xE740;" />
                        </Button>

                        <!--  Settings Navigation Item (Custom image)  -->
                        <Button
                            x:Name="SettingsNavButton"
                            Width="60"
                            Height="60"
                            HorizontalAlignment="Center"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Click="SettingsNavButton_Click"
                            Style="{StaticResource NavigationButtonStyle}"
                            TabIndex="5"
                            ToolTipService.ToolTip="Settings">
                            <FontIcon
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="25"
                                Glyph="&#xE713;" />
                        </Button>

                        <!--  Game Library Scanning Progress Indicator  -->
                        <StackPanel
                            x:Name="ScanProgressPanel"
                            Width="50"
                            Height="70"
                            Margin="0,20,0,0"
                            HorizontalAlignment="Center"
                            Visibility="{x:Bind IsGameLibraryScanning, Mode=OneWay}">
                            <ProgressRing
                                x:Name="ScanProgressRing"
                                Width="30"
                                Height="30"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Foreground="DarkViolet"
                                IsActive="{x:Bind IsGameLibraryScanning, Mode=OneWay}"
                                ToolTipService.ToolTip="{x:Bind ScanProgressText, Mode=OneWay}" />
                            <TextBlock
                                Padding="5"
                                HorizontalAlignment="Center"
                                FontSize="10"
                                Opacity=".8">
                                Scanning<LineBreak />
                                library...</TextBlock>
                        </StackPanel>

                    </StackPanel>

                    <!--  Bottom section with Alt+Tab and Close buttons  -->
                    <StackPanel
                        Grid.Row="1"
                        Margin="0,0,0,20"
                        HorizontalAlignment="Center"
                        Orientation="Vertical"
                        Spacing="8">

                        <!--  LT Glyph - Navigate dynamic buttons  -->
                        <StackPanel
                            Margin="0,5,0,5"
                            HorizontalAlignment="Center"
                            Orientation="Horizontal"
                            Spacing="03">
                            <Image
                                Width="20"
                                Height="20"
                                HorizontalAlignment="Center"
                                Opacity="0.7"
                                Source="/Assets/Glyphs/xbox_lt_outline.png"
                                Stretch="Uniform" />

                            <Image
                                Width="20"
                                Height="20"
                                HorizontalAlignment="Center"
                                Opacity="0.7"
                                Source="/Assets/Glyphs/xbox_rt_outline.png"
                                Stretch="Uniform" />
                        </StackPanel>

                        <!--  Alt+Tab (Back to Game) button  -->
                        <Button
                            x:Name="AltTabButton"
                            Width="50"
                            Height="50"
                            HorizontalAlignment="Center"
                            Click="AltTabButton_Click"
                            Style="{StaticResource GlowingGameButtonStyle}"
                            ToolTipService.ToolTip="Switch to Game &amp; Hide"
                            Visibility="Collapsed">
                            <FontIcon
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="20"
                                Glyph="&#xE8AB;" />
                        </Button>

                        <!--  Force Quit Game button  -->
                        <Button
                            x:Name="ForceQuitButton"
                            Width="50"
                            Height="50"
                            HorizontalAlignment="Center"
                            Click="ForceQuitButton_Click"
                            Style="{StaticResource GlowingGameButtonStyle}"
                            ToolTipService.ToolTip="Force Quit Game"
                            Visibility="{x:Bind ForceQuitButtonVisible, Mode=OneWay}">
                            <FontIcon
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="20"
                                Foreground="#FF5555"
                                Glyph="&#xE711;" />
                        </Button>

                        <!--  Lossless Scaling button  -->
                        <Button
                            x:Name="LosslessScalingButton"
                            Width="50"
                            Height="50"
                            HorizontalAlignment="Center"
                            Click="LosslessScalingButton_Click"
                            Style="{StaticResource GlowingGameButtonStyle}"
                            Visibility="{x:Bind LosslessScalingButtonVisible, Mode=OneWay}">
                            <Image
                                Width="25"
                                Height="25"
                                Source="/Assets/ls-icon.png" />
                        </Button>

                        <!--  Close button  -->
                        <Button
                            x:Name="CloseButton"
                            Width="50"
                            Height="50"
                            HorizontalAlignment="Center"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Click="CloseButton_Click"
                            Style="{StaticResource GlowingGameButtonStyle}"
                            ToolTipService.ToolTip="Hide">
                            <FontIcon
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="20"
                                Glyph="&#xE70D;" />
                        </Button>

                    </StackPanel>
                </Grid>
            </Border>

            <!--  Content Area  -->
            <Grid Grid.Column="1" Margin="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  First-run welcome InfoBar  -->
                <InfoBar
                    x:Name="WelcomeInfoBar"
                    Title="Welcome to HUDRA Beta!"
                    Grid.Row="0"
                    Margin="10,10,10,0"
                    Closed="WelcomeInfoBar_Closed"
                    IsClosable="True"
                    IsOpen="False"
                    Message="Configure your TDP, fan curves, and more. Check Settings for startup options."
                    Severity="Informational" />

                <!--  Active Game Profile Bar (bottom)  -->
                <Border
                    x:Name="GameProfileBar"
                    Grid.Row="2"
                    Margin="10,0,10,20"
                    Padding="16,10"
                    Background="#2C1C34"
                    CornerRadius="20"
                    Visibility="{x:Bind IsGameProfileActive, Mode=OneWay}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <TextBlock
                            Grid.Column="0"
                            VerticalAlignment="Center"
                            FontFamily="Cascadia Code"
                            FontSize="13"
                            FontWeight="Normal"
                            Foreground="White"
                            Text="{x:Bind GameProfileTitle, Mode=OneWay}" />

                        <Button
                            Grid.Column="1"
                            Width="55"
                            Height="40"
                            Margin="8,0,10,0"
                            Padding="0"
                            VerticalAlignment="Center"
                            Click="GameProfileRevert_Click"
                            CornerRadius="4"
                            ToolTipService.ToolTip="Revert to default profile">
                            <FontIcon
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="14"
                                Glyph="&#xE7A7;" />
                        </Button>

                        <Button
                            Grid.Column="2"
                            Width="55"
                            Height="40"
                            Padding="0"
                            VerticalAlignment="Center"
                            Click="GameProfileDismiss_Click"
                            CornerRadius="4"
                            ToolTipService.ToolTip="Dismiss">
                            <FontIcon
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="14"
                                Glyph="&#xE711;" />
                        </Button>
                    </Grid>
                </Border>

                <!--  Revert notification Bar (bottom, same position as profile bar)  -->
                <Border
                    x:Name="RevertNotificationBar"
                    Grid.Row="2"
                    Height="75"
                    Margin="10,0,10,20"
                    Padding="16,10"
                    Background="#2C1C34"
                    CornerRadius="20"
                    Visibility="Collapsed">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" VerticalAlignment="Center">
                            <TextBlock
                                Padding="0,0,0,5"
                                FontFamily="Cascadia Code"
                                FontSize="13"
                                FontWeight="SemiBold"
                                Foreground="White"
                                Text="Profile Settings Reverted!" />
                            <TextBlock
                                x:Name="RevertNotificationDescription"
                                Padding="0,0,5,0"
                                FontFamily="Calibri"
                                FontSize="14"
                                Foreground="#AAAAAA"
                                Text="Reverted to your Default Profile settings."
                                TextWrapping="Wrap" />
                        </StackPanel>

                        <Button
                            Grid.Column="1"
                            Width="40"
                            Height="40"
                            Padding="0"
                            VerticalAlignment="Center"
                            Click="RevertNotificationBar_Dismiss_Click"
                            CornerRadius="4"
                            ToolTipService.ToolTip="Dismiss">
                            <FontIcon
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="14"
                                Glyph="&#xE711;" />
                        </Button>
                    </Grid>
                </Border>

                <ScrollViewer
                    x:Name="ContentScrollViewer"
                    Grid.Row="1"
                    Padding="0,10,0,10"
                    HorizontalScrollBarVisibility="Disabled"
                    HorizontalScrollMode="Disabled"
                    IsTabStop="False"
                    VerticalScrollBarVisibility="Auto"
                    VerticalScrollMode="Auto"
                    ZoomMode="Disabled">
                    <Frame
                        x:Name="ContentFrame"
                        MaxWidth="320"
                        HorizontalAlignment="Center"
                        IsTabStop="False" />
                </ScrollViewer>
            </Grid>

        </Grid>
    </Border>
</Window>